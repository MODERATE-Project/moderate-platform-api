# MODERATE Platform API

This repository contains the HTTP API of the MODERATE platform, serving as the public entry point for developers to interact programmatically with the data assets and services provided by MODERATE.

The API is based on the following main building blocks:

* [FastAPI](https://github.com/tiangolo/fastapi) as the HTTP API framework.
* [SQLModel](https://github.com/tiangolo/sqlmodel) to define the data models and interact with the database.
* [Casbin](https://github.com/casbin/casbin) to implement the authorization layer.

**Authentication** is handled by the central MODERATE identity provider (Keycloak). The API is prepared to sit behind MODERATE's API gateway (APISIX) which communicates with Keycloak to issue access tokens and then include them in the `Authorization` header of the requests forwarded to the API. The API then validates the token and extracts the user's identity from it.

**Authorization** is based on the list of roles assigned to the user in Keycloak, which are then mapped to permissions in the API using Casbin.

**Documentation** of the API is based on the OpenAPI specification and is automatically generated by FastAPI.